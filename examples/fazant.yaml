sources:
  background:
    type: image
    path: images/background.png
  video0:
    type: v4l
    path: /dev/video0
    fmt: yuyv
    frames:
      width: 640
      height: 480
      num_allocated_frames: 6
    num_frames_in_writing: 3
    fps: 60
  video0_ffmpeg:
    type: ffmpeg_stdout
    cmd: 'ffmpeg -f v4l2 -framerate 60 -video_size 1920x1080 -i /dev/video0 -pix_fmt yuv422p -vf scale=1920:1080 -f rawvideo -r 60 -'
    frames:
      width: 1920
      height: 1080
      num_allocated_frames: 5
  pheasant:
    type: ffmpeg_stdout
    cmd: 'ffmpeg -stream_loop -1 -re -i https://rnd.qtrp.org/test_videos/pheasants.webm -vf scale=1920:1080 -pix_fmt yuv422p -f rawvideo -r 60 -'
    frames:
      width: 1920
      height: 1080
      num_allocated_frames: 5
  cows:
    type: ffmpeg_stdout
    cmd: 'ffmpeg -stream_loop -1 -re -i https://rnd.qtrp.org/test_videos/cows.mp4 -vf scale=1920:1080 -pix_fmt yuv422p -f rawvideo -r 60 -'
    frames:
      width: 1920
      height: 1080
      num_allocated_frames: 5
  fazantfazantfazant:
    type: ffmpeg_stdout
    cmd: 'ffmpeg -stream_loop -1 -re -i https://rnd.qtrp.org/test_videos/fazantfazantfazant.mkv -vf scale=1920:1080 -pix_fmt yuv422p -f rawvideo -r 60 -'
    frames:
      width: 1920
      height: 1080
      num_allocated_frames: 5
  video_listen:
    type: ffmpeg_stdout
    cmd: 'ffmpeg -stream_loop -1 -re -i "tcp://0.0.0.0:7788?listen=1&recv_buffer_size=1048576" -vf scale=1920:1080 -pix_fmt yuv422p -f rawvideo -r 60 -'
    frames:
      width: 1920
      height: 1080
      num_allocated_frames: 5

scenes:
  foo:
    layers:
      - source: background
        transform:
          x: 0
          y: 0
          scale: 1
          opacity: 1
      - source: pheasant
        transform:
          x: 0.75
          y: 0.6
          scale: 0.2
          opacity: 0.8
      - source: cows
        transform:
          x: 0.025
          y: 0.049
          scale: 0.79
          opacity: 1
  bar:
    layers:
      - source: background
        transform:
          x: 0
          y: 0
          scale: 1
          opacity: 1
      - source: video0
        transform:
          x: 0.025
          y: 0.049
          scale: 0.79
          opacity: 1
      - source: cows
        transform:
          x: 0.75
          y: 0.6
          scale: 0.2
          opacity: 1
  baz:
    layers:
      - source: background
        transform:
          x: 0
          y: 0
          scale: 1
          opacity: 1
      - source: cows
        transform:
          x: 0.025
          y: 0.049
          scale: 0.79
          opacity: 1
      - source: video0
        transform:
          x: 0.75
          y: 0.6
          scale: 0.2
          opacity: 1

sinks:
  fazant:
    type: window
    frames:
      width: 1280
      height: 720
    default_scene: foo
    transition_time_ms: 1500

api:
  bind: ':8000'
  enable_profiler: true

fallback_colour: '#ebac54ff'
bg_colour: '#54acebff'
